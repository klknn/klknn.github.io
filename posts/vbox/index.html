<!doctype html><html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>VirtualBoxで別ディスクのOSを起動する</title><style>@media(prefers-color-scheme:dark){body{background-color:#222;color:#ddd}a:link{color:#88c}a:visited{color:#bbc}a:hover{color:#f88}a:active{color:#f80}}h1,h2,h3,h4,h5,h6{margin:2rem auto 1rem;max-width:50rem}.single-metadata{margin:auto;padding:auto;line-height:.5rem;max-width:50rem;border:dotted}.neighbour-pages{font-style:italic;padding:1rem}p,.highlight,.gist-file,figure,hr,.twitter-tweet,.footnotes{margin:1rem auto;max-width:50rem}.footnote-body{margin:1rem}blockquote{margin:1rem auto;max-width:45rem;font-style:italic;border-left:solid 5px}ol,ul,li{margin:.75rem auto;max-width:50rem}p img{width:100%}table,th,td{border-collapse:collapse;border:1px solid;line-height:1.5;padding:10px;border-left:none;border-right:none;margin:1rem auto;max-width:50rem}figcaption{text-align:center;font-style:italic}.index-date{text-align:right;font-style:italic}pre{overflow:scroll}</style><script>MathJax={tex:{tags:"ams",inlineMath:[["$","$"],["\\(","\\)"]]}}</script><script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js></script></head><body><a href=/>klknn log</a> /
<a href=/posts/>posts</a> /
<a href=/tags/>tags</a> /
<a href=/works/>works</a> /
<a href=/index.xml>feed</a> /
<a href=https://github.com/klknn/klknn.github.io>src</a><h1>VirtualBoxで別ディスクのOSを起動する</h1><div class=single-metadata><ul><li>date: 2023-08-11 16:25:33 +0900 <a href=https://github.com/klknn/klknn.github.io/edit/develop/content/posts/vbox.md>edit</a></li><li>tags:
<a href=/tags/memo/>memo</a></li><li>toc:<nav id=TableOfContents></nav></li></ul></div><p>机にWindowsとLinux二台置くのはだるいし、ちょっとした動作確認とかなら性能もいらずにGUIを触れることが大事なので、一つのPCに両OSをインストールしてVirtualBoxで起動するのが便利です。</p><p>ホストOS(例Windows11)ではこんな感じで仮想ハードディスクであるvmdkファイルを作成できる。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>cd <span style=color:#e6db74>&#39;C:\Program Files\Oracle\VirtualBox\&#39;</span>
</span></span><span style=display:flex><span>.<span style=color:#ae81ff>\V</span>BoxManage.exe createmedium -filename <span style=color:#e6db74>&#34;C:\Users\aaa\VirtualBox VMs\ubuntu22.vmdk&#34;</span> --format<span style=color:#f92672>=</span>VMDK --variant RawDisk --property RawDrive<span style=color:#f92672>=</span><span style=color:#ae81ff>\\</span>.<span style=color:#ae81ff>\P</span>HYSICALDRIVE1
</span></span></code></pre></div><p>出力先や<code>\\.\PHYSICALDRIVE1</code> の番号は適宜disk managementなどのアプリで確認したものを指定してください。
<code>internalcommands createrawvmdk</code> を<a href=https://www.serverwatch.com/guides/how-to-use-a-physical-hard-drive-with-a-virtualbox-vm/>使う場合</a>、なぜかWindows11だとNOT FOUNDみたいなエラーでてきて作れませんでした。</p><p>そんで仮想マシンを新規作成するときのUIがややこしくて、まず一番下のハードディスク欄でvmdkファイルを指定すると、一番上の方の名前を入力して完了。実際起動するとこんなエラーがでるので、</p><blockquote><p>仮想マシンの実行中にエラーが発生しました！エラーの詳細を以下に示します。説明されたエラーを修正し、仮想マシンの再実行することができます。
The I/O cache encountered an error while updating data in medium "ahci-0-0" (rc=VERR_ACCESS_DENIED). Make sure there is enough free space on the disk and that the disk is working properly. Operation can be resumed afterwards.</p></blockquote><blockquote><p>Error ID:BLKCACHE_IOERR
Severity:致命的でないエラー</p></blockquote><p>設定の[ストレージ]で先述のvmdkファイルを選んで、[ホストのI/O キャッシュを使う]を有効にします。参考: <a href=https://so-zou.jp/software/tool/virtualization/virtual-box/>https://so-zou.jp/software/tool/virtualization/virtual-box/</a></p><p><img src=https://github.com/klknn/klknn.github.io/assets/57452864/3b738654-a2cf-4940-8c04-d15c235f2ae5 alt=ゲストアドオンCDを入れたスクショ></p><p>画面のリサイズは「デバイス>Guest Additions CDイメージの挿入」をクリックすると、ゲストOS側にCDが認識されるので <code>autorun.sh</code> というファイルを実行すると機能します。</p><div class=neighbour-pages><hr><p><a href=#>Back to top</a></p><p><a href=https://klknn.github.io/posts/20221218/>Prev: 年末セールで買った音楽機材</a></p><p><a href=https://klknn.github.io/posts/20240506/>Next: IK ARC Studio、バイオリン購入など</a></p></div>Copyright © klknn All Rights Reserved.</body></html>